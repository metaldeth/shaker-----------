# Блоки в задаче
## Статусы автоматов
### Описание статуса
[[Статус автомата]]
На странице отображаются 3 возможный статуса автомата. В каждом статусе указано количество автоматов в этом статусе. Так-же указывается общее количество автоматов.
### Логика 
#### Пересчёт статус при установки фильтраций
1. #Вопрос При использовании поиска
2. Если установлен фильтр по модели, то выполняется пересчёт количества автоматов в статусах
3. Если установлен фильтр по статусу, то пересчёт выполнять не нужно
4. Если установлен фильтр(настройка) по продажам [[Список автоматов# Фильтр продаж]], то пересчёт бессмыслен

#### Выбор статуса из панели статусов
1. Клик по карточке устанавливает фильтр по статусу [[Список автоматов# Фильтр статуса]]
2. Выбранный статус должен быть подсвечен сверху

### Внешний вид
Статусы выглядят как 4 карточки, 3 для статуса и 1 для общего количества. 

Требуется подсветка выбранного статуса

![[Pasted image 20240118194946.png]]

## Фильтрация и поиск
### Фильтр модели
#### Данные
1. Массив моделей автомата [[Модель автомата]]
	1. Название модели
	2. Количество автоматов этой модели в списке
	3. Флаг выбора 

#### Логика
1. При применении поиска меняется количество автоматов в разных моделях
2. При выборе необходимы моделей автоматов, нажимаем кнопку "применить". Далее фильтр применяется. Должен измениться внешний вид кнопки

#### Внешний вид
##### Кнопка при не выбранном фильтре
![[Pasted image 20240119124116.png]]
##### Кнопка при выбранном фильтре
Кнопка меняет цвет, указывается количество выбранных моделей автоматов
![[Pasted image 20240119124102.png]]
##### Фильтр

![[Pasted image 20240119122835.png]]
### Фильтр продаж
#### Данные
1. Список возможных вариантов 
	1. За день
	2. За неделю
	3. За месяц
	4. За год
#### Логика
1. При выборе фильтра отправляется запрос на бэк, где запрашивается массив продаж автоматов [[Список автоматов# Запрос продаж автоматов]]
#### Внешний вид
##### Кнопка при не выбранном фильтре
Не может быть, всегда выбран хотя бы 1 элемент
##### Кнопка при выбранном фильтре
![[Pasted image 20240119124412.png]]
##### Фильтр
![[Pasted image 20240119123718.png]]
### Фильтр статуса
#### Данные
1. Массив возможных статусов
	1. Название статуса
	2. Количество автоматов в этом статусе
	3. Флаг выбора статуса

#### Логика
1. Выбор фильтра возможен как через карточки вверху страницы, так и через фильтр. 
2. Важно добавить 4-й элемент списка в фильтр(показать весь список/отмена фильтра)

#### Внешний вид
##### Кнопка при не выбранном фильтре
![[Pasted image 20240119124623.png]]
##### Кнопка при выбранном фильтре
Нужно сделать по аналогии
![[Pasted image 20240119124412.png]]
##### Фильтр
#НужныПравкиВМакетах Требуется перерисовать фильтр с checkbox на radio
![[Pasted image 20240119123648.png]]
В качестве примера, сделать нужно так
![[Pasted image 20240119123718.png]]
## Таблица автоматов
### Поле "Автоматы"
#### Данные
1. Название автомата
2. Статус онлайн
3. Модель автомата
4. Серийный номер
#### Сортировка
1. Сортировка по названию автомата
#### Логика
1. Кругом отображается статус автомата онлайн

![[Pasted image 20240119104816.png]]
### Поле "Продажи"
#### Данные
1. Общая сумма продаж за период
2. Количество продаж за период
#### Сортировка
1. Сортировку делаем по сумме 
2. #Хвост_дизайна(но лучше посмотреть в сторону выбора)
#### Логика
##### Запрос продаж автоматов
1. На вход
	1. organizationId
	2. период за который показать продажи 
		1. День
		2. Неделя
		3. Месяц
		4. Год
2. На выход
	1. 1. id автомата
	2. Сумма продаж за период
	3. Количество продаж за период

![[Pasted image 20240119104902.png]]
### Поле "Остатки"
#### Данные
Массив ячеек [[Склад автомата# Ячейки]]
#### Сортировка
Нет
#### Логика
1. Отображается массив ячеек
2. Требуется сгруппировать ячейки по группам. 
	1. По аналогии с [[Наполнение автомата]]
3. Процент остатка высчитывается по формуле value / maxValue * lineHeight(высота линии отображения остатка)
	1. По аналогии с [[Наполнение автомата]]
![[Pasted image 20240119104930.png]]
### Поле "Статус"
#### Данные
1. Статус автомата
2. Дата постановки статуса #Вопрос Нужно подумать над разными часовыми поясами
#### Сортировка
1. Сортировка по негативности 
	1. alert
	2. warning
	3. success

![[Pasted image 20240119105117.png]]