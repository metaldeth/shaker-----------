## Действия на странице списка моделей автомата
### Список моделей автомата
1. Обычная таблица с поиском
 #### Столбцы
 1. Название
 2. Схема остатков
 3. Действия 
### Создания модели автомата
#### Форма 2 шага
##### 1 шаг
1. Название модели
2. Количество вариантов объёмов напитка 
3. Группа #Добавить_в_макет ![[Группы моделей автомата]]
```ts
type BaseModelDTO = {
  name: string;
  maxVolume: number;
  groupModel: MachineModelGroup;
}
```


##### 2 шаг
###### Ячейки продуктов
Требуется пред заполнение данных

Сама форма
1. Номер ячейки
2. Id категории ячейки
3. id назначения ячейки
4. Группа продуктов
	1. Порошок
	2. Концентрат
	3. Зёрна
5. Вариант внешнего вида
	1. Primary
	2. Secondary
	3. Coffee
	4. Default
6. Максимальный объём ячейки
7. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)==
8. Таймер годности==(Нужен как дефолтное значение)==
```ts
type ProductModelCell = {
  cellNumber: number,
  cellCategoryId: number,
  cellPurposeId: number,
  group: ProductGroup,
  view: ProductView,
  maxVolume: number,
  minVolume: number,
  // Количество дней
  expirationTimer: number
}
```
###### Ячейки воды
1. Номер ячейки
2. Подключена бутылка
	1. Максимальный объём бутылки
	2. Минимальный объём бутылки для отправки оповещения==(Нужен как дефолтное значение)==
	3. Таймер годности==(Нужен как дефолтное значение)==
3. Подключён кран
	1. Таймер годности==(Нужен как дефолтное значение)==
	2. Счётчик годности(объём, который фильтр может отфильтровать)==(Нужен как дефолтное значение)==
![[2024-01-25#Доработки_бэк Сделать разделение таймеров Саша бэк Модель автомата Ячейки воды]]

```ts
type WaterModelCell = {
  cellNumber: number,
  maxVolume: number,
  minVolume: number,
  // Количество дней
  expirationTimer: number,
    // Количество дней
  filterTimer: number,
  filterValue: number,
  isCount: boolean,
}
```
###### Ячейки стаканов
1. Номер ячейки
2. Объём стакана
3. Считать количество
	1. Максимальный объём ячейки с стаканами==(Нужен как дефолтное значение)==
	2. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)==
4. Не считать количество
	1. Полей нет

```ts
type CupModelCell = {
  cellNumber: number,
  cupVolume: number,
  maxVolume?: number,
  minVolume?: number,
  isCount: boolean
}
```

###### Ячейки расходников
1. Номер ячейки
2. Название расходника
3.  Считать количество
	1. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)==
4. Не считать количество
	1. Полей нет

```ts
type DisposableModelCell = {
  cellNumber: number,
  name: string,
  minVolume?: number,
  isCount: boolean
}
```

##### Валидация формы
1. Проверить наличие
	1. Ячейки с продуктом(хотя бы одной)
	2. Ячейки с водой для групп [[Группы моделей автомата]]
		1. Кофе
		2. Дефолтное

### Просмотр детальной информации
#### Модальное окно с чипсами (общее / контейнеры)
##### Общее
1. Название модели
2. Количество вариантов объёмов напитка 
3. Группа #Добавить_в_макет ![[Группы моделей автомата]]
##### Контейнеры
1. Список контейнеров. Реализация через DefaultItem. [[Модель автомата# 2 шаг]]

### Удаление модели автомата
1. Стандартное удаление без подтверждения
2. #Добавить_в_макет Фильтр показа архивных моделей
3. ![[2024-01-25#Доработки_бэк При наличии у модели связанных автоматов - архивируем. Если связанных автоматов нет - удаляем Саша бэк Модель автомата Удаление модели автомата]]
4. ![[2024-01-25#Доработки_бэк Добавить получение архивных моделей Саша бэк Модель автомата Удаление модели автомата]]

## Необходимые типы данных


## Запросы
1. Список моделей автомата
```json
	[
	  {
	    "id": 0,
	    "name": "string"
	  }
	]

```

2. Детальная информация о модели автомата
```ts
type MachineModelDetailsDTO = CreateMachineModelDTO & {  
  id: number;  
};
```

3. Создание модели автомата
```ts
type CreateMachineModelDTO = BaseModelDTO & {  
  cells: ProductModelCell[];  
  cellCups: CupModelCell[];  
  cellWaters: WaterModelCell[];  
  cellDisposables: DisposableModelCell[];  
};
```

4. Удаление модели автомата
	1. Параметром передать machineModelId

## redux хранилище
1. Список моделей
2. Детальная информация о модели автомата

## Особенности
1. Не используется редактирование. Решение принято [[Рома]]
