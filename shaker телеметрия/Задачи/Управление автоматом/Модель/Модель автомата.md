## Действия на странице списка моделей автомата
### Список моделей автомата
1. Обычная таблица с поиском
 #### Столбцы
 1. Название
 2. Схема остатков
 3. Действия 
 ---
### Создания модели автомата
#### Форма 2 шага
##### 1 шаг
1. Название модели
2. Количество вариантов объёмов напитка 
3. Группа  #Добавить_в_макет ![[Группы моделей автомата]]
```ts
type BaseModelDTO = {
  name: string;
  maxVolume: number;
  groupModel: MachineModelGroup;
}
```

---
##### 2 шаг
#Добавить_в_макет отрисовать в макете новый формат ячеек [[Демьян#Задачи]]
###### Особенности формы
1. При действиях - удаление / добавление / копирование автоматически заполняются поля с номером ячейки. Заполняются increment. по такому порядку
	1. Продукты
	2. Вода
	3. Стаканы
	4. Расходники
2. Для ячеек продуктов / стаканов / расходников есть функционал удаление / добавление / копирование ячейки. 
3. Для воды заранее созданы 2 ячейки
	1. Для подключена бутылка
	2. Для подключён кран
4. Отображение ошибок в chips пока что откладываю. Слишком большой функционал

###### Ячейки продуктов
![[Pasted image 20240125132912.png]]
Сама форма
1. Номер ячейки = 1
2. Id категории ячейки = null
3. id назначения ячейки = null
4. Группа продуктов = POWDER
	1. Порошок
	2. Концентрат  
	3. Зёрна
5. Внешний вид = PRIMARY
	1. Primary
	2. Secondary
	3. Coffee
	4. Default
6. Максимальный объём ячейки = 2000
7. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)== = 200

8. Таймер годности==(Нужен как дефолтное значение)== = 14
```ts
type ProductModelCell = {
  cellNumber: number,
  cellCategoryId: number | null,
  cellPurposeId: number | null,
  group: ProductGroup,
  view: ProductView,
  maxVolume: number,
  minVolume: number,
  // Количество дней
  expirationTimer: number
}
```
---
###### Ячейки воды
![[Pasted image 20240125134733.png]]
1. Номер ячейки
2. Подключена бутылка
	1. Максимальный объём бутылки
	2. Минимальный объём бутылки для отправки оповещения==(Нужен как дефолтное значение)==
	3. Таймер годности==(Нужен как дефолтное значение)==
3. Подключён кран
	1. Таймер годности==(Нужен как дефолтное значение)==
	2. Счётчик годности(объём, который фильтр может отфильтровать)==(Нужен как дефолтное значение)==
![[2024-01-25#Сделать разделение таймеров Саша бэк Модель автомата Ячейки воды]]
```ts
type WaterModelCell = {
  cellNumber: number,
  maxVolume: number,
  minVolume: number,
  // Количество дней
  expirationTimer: number,
    // Количество дней
  filterTimer: number,
  filterValue: number,
  isCount: boolean,
}
```
---
###### Ячейки стаканов
![[Pasted image 20240125133633.png]]
1. Номер ячейки
2. Объём стакана
3. Считать количество
	1. Максимальный объём ячейки с стаканами==(Нужен как дефолтное значение)==
	2. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)==
4. Не считать количество
	1. Полей нет

```ts
type CupModelCell = {
  cellNumber: number,
  cupVolume: number,
  maxVolume?: number,
  minVolume?: number,
  isCount: boolean
}
```
---
###### Ячейки расходников
![[Pasted image 20240125133644.png]]
1. Номер ячейки
2. Название расходника
3.  Считать количество
	1. Минимальный объём ячейки для отправки оповещения==(Нужен как дефолтное значение)==
4. Не считать количество
	1. Полей нет

```ts
type DisposableModelCell = {
  cellNumber: number,
  name: string,
  minVolume?: number,
  isCount: boolean
}
```
---
##### Валидация формы
1. Проверить наличие
	1. Ячейки с продуктом(хотя бы одной)
	2. Ячейки с водой для групп [[Группы моделей автомата]]
		1. Кофе
		2. Дефолтное
2. Нет дублирования containerNumber
3. Заполнены все поля, кроме:
	1. Категория ячейки
	2. Назначение ячейки
---
### Просмотр детальной информации
#### Модальное окно с чипсами (общее / контейнеры)
##### Общее
1. Название модели
2. Количество вариантов объёмов напитка 
3. Группа #Добавить_в_макет ![[Группы моделей автомата]]
---
##### Контейнеры
1. Список контейнеров. Реализация через DefaultItem. [[Модель автомата# 2 шаг]]
---
### Удаление модели автомата
1. Стандартное удаление без подтверждения
2. #Добавить_в_макет Фильтр показа архивных моделей
3. ![[2024-01-25# При наличии у модели связанных автоматов - архивируем. Если связанных автоматов нет - удаляем Саша бэк Модель автомата Удаление модели автомата]]
4. ![[2024-01-25# Добавить получение архивных моделей Саша бэк Модель автомата Удаление модели автомата]]
---
## Запросы
1. Список моделей автомата
```json
	[
	  {
	    "id": 0,
	    "name": "string"
	  }
	]

```

2. Детальная информация о модели автомата
```ts
type MachineModelDetailsDTO = CreateMachineModelDTO & {  
  id: number;  
};
```

3. Создание модели автомата
```ts
type CreateMachineModelDTO = BaseModelDTO & {  
  cells: ProductModelCell[];  
  cellCups: CupModelCell[];  
  cellWaters: WaterModelCell[];  
  cellDisposables: DisposableModelCell[];  
};
```

4. Удаление модели автомата
	1. Параметром передать machineModelId
---
## redux хранилище
1. Список моделей
2. Детальная информация о модели автомата
---
## Особенности
1. Не используется редактирование. Решение принято [[Рома]]
